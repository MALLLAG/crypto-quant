---
name: Git Commit Helper
description: Git diff를 분석하여 설명적인 커밋 메시지를 생성합니다. 커밋 메시지 작성이나 스테이징된 변경사항 검토 시 사용하세요.
---

# Git 커밋 도우미

## 빠른 시작

스테이징된 변경사항을 분석하고 커밋 메시지 생성:

```bash
# 스테이징된 변경사항 보기
git diff --staged

# 변경사항 기반으로 커밋 메시지 생성
# (Claude가 diff를 분석하고 메시지를 제안합니다)
```

## 커밋 메시지 형식

Conventional Commits 형식을 따릅니다:

```
<타입>(<범위>): <설명>

[선택적 본문]

[선택적 푸터]
```

### 타입

- **feat**: 새로운 기능
- **fix**: 버그 수정
- **docs**: 문서 변경
- **style**: 코드 스타일 변경 (포매팅, 세미콜론 누락 등)
- **refactor**: 코드 리팩토링
- **test**: 테스트 추가 또는 수정
- **chore**: 유지보수 작업

### 예시

**기능 추가:**
```
feat(auth): JWT 인증 추가

JWT 기반 인증 시스템 구현:
- 토큰 생성 로그인 엔드포인트
- 토큰 검증 미들웨어
- 리프레시 토큰 지원
```

**버그 수정:**
```
fix(api): 사용자 프로필 null 값 처리

사용자 프로필 필드가 null일 때 크래시 방지.
중첩 속성 접근 전 null 체크 추가.
```

**리팩토링:**
```
refactor(database): 쿼리 빌더 단순화

공통 쿼리 패턴을 재사용 가능한 함수로 추출.
데이터베이스 레이어의 코드 중복 감소.
```

## 변경사항 분석

커밋될 내용 검토:

```bash
# 변경된 파일 목록
git status

# 상세 변경사항
git diff --staged

# 통계 보기
git diff --staged --stat

# 특정 파일 변경사항
git diff --staged path/to/file
```

## 커밋 메시지 가이드라인

**권장:**
- 명령형 사용 ("기능 추가", "추가했음" X)
- 첫 줄 50자 이내 유지
- 첫 글자 대문자 (영어의 경우)
- 요약 끝에 마침표 생략
- 본문에서 WHAT보다 WHY 설명

**지양:**
- "업데이트", "수정" 같은 모호한 메시지
- 요약에 기술적 구현 세부사항 포함
- 요약을 문단으로 작성
- 과거형 사용

## 여러 파일 커밋

여러 관련 변경사항을 커밋할 때:

```
refactor(core): 인증 모듈 구조 개선

- 인증 로직을 컨트롤러에서 서비스 레이어로 이동
- 검증 로직을 별도 validator로 추출
- 새 구조에 맞게 테스트 수정
- 인증 플로우 통합 테스트 추가

Breaking change: Auth 서비스에 config 객체 필요
```

## 범위 예시

**프론트엔드:**
- `feat(ui): 대시보드에 로딩 스피너 추가`
- `fix(form): 이메일 형식 검증`

**백엔드:**
- `feat(api): 사용자 프로필 엔드포인트 추가`
- `fix(db): 커넥션 풀 누수 해결`

**인프라:**
- `chore(ci): Node 버전 20으로 업데이트`
- `feat(docker): 멀티스테이지 빌드 추가`

## Breaking Changes

호환성 깨지는 변경은 명확히 표시:

```
feat(api)!: API 응답 형식 변경

BREAKING CHANGE: 모든 API 응답이 JSON:API 스펙을 따름

이전 형식:
{ "data": {...}, "status": "ok" }

새 형식:
{ "data": {...}, "meta": {...} }

마이그레이션 가이드: 클라이언트 코드를 새 응답 구조에 맞게 수정 필요
```

## 작업 흐름 템플릿

1. **변경사항 검토**: `git diff --staged`
2. **타입 식별**: feat, fix, refactor 등
3. **범위 결정**: 코드베이스의 어느 부분
4. **요약 작성**: 간결하고 명령형으로
5. **본문 추가**: 왜, 어떤 영향이 있는지 설명
6. **Breaking changes 표시**: 해당되는 경우

## 대화형 커밋 도우미

`git add -p`로 선택적 스테이징:

```bash
# 대화형으로 변경사항 스테이징
git add -p

# 스테이징된 내용 확인
git diff --staged

# 메시지와 함께 커밋
git commit -m "타입(범위): 설명"
```

## 커밋 수정

마지막 커밋 메시지 수정:

```bash
# 커밋 메시지만 수정
git commit --amend

# 변경사항 추가하며 수정
git add forgotten-file.js
git commit --amend --no-edit
```

## 모범 사례

1. **원자적 커밋** - 커밋당 하나의 논리적 변경
2. **커밋 전 테스트** - 코드가 동작하는지 확인
3. **이슈 참조** - 해당되면 이슈 번호 포함
4. **집중 유지** - 관련 없는 변경 섞지 않기
5. **사람을 위해 작성** - 미래의 자신이 읽을 것

## 커밋 메시지 체크리스트

- [ ] 타입이 적절한가 (feat/fix/docs 등)
- [ ] 범위가 구체적이고 명확한가
- [ ] 요약이 50자 이내인가
- [ ] 요약이 명령형인가
- [ ] 본문이 WHAT이 아닌 WHY를 설명하는가
- [ ] Breaking changes가 명확히 표시되었는가
- [ ] 관련 이슈 번호가 포함되었는가
